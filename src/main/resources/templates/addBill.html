<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <title>支出（报销）新增</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="/layui-v2.4.5/layui/css/layui.css" media="all">
    <script src="/js/jquery-3.3.1.min.js"></script>
    <script src="/layui-v2.4.5/layui/layui.js"></script>
    <script src="/js/addBill.js"></script>
    <script src="/js/tools.js"></script>
    <!--<script src="/layer-v3.1.1/layer/layer.js"></script>-->
    <style type="text/css">
        .table-c{
            border-right:1px solid #9F9F9F;
            border-bottom:1px solid #9F9F9F;
            width: 100%;
            background-color: #f2fafe;
        }
        td{
            border-left:1px solid #9F9F9F;
            border-top:1px solid #9F9F9F;
            padding-top: 8px;
            padding-bottom: 8px;
        }
        .firstTd{
            width: 90px;
            text-align: right;
        }
        .thirdTd{
            width: 80px;
            text-align: right;
        }
    </style>
</head>
<body>
<div class="layui-container">
    <div class="layui-row">
        <div class="layui-col-xs-1"></div>
        <div class="layui-col-xs-10">
            <form class="layui-form" id="form1">
            <table  class="table-c">
                <caption>支出（报销）新增</caption>
                <tr>
                    <td class="firstTd">报销单号</td>
                    <td><input type="text" style="width: 50px" value="hbf">+<input type="text" value="212121212" readonly style="width: 120px;background-color: #9F9F9F">*自动生成</td>
                    <td class="thirdTd">金额</td>
                    <td><input type="number" style="width: 80px">元（保留两位小数）</td>
                </tr>
                <tr>
                    <td class="firstTd">公司</td>
                    <td><select id="company">
                        <option th:text="${session.staff.companyName}">
                        </option>
                    </select></td>
                    <td class="thirdTd">产生日期</td>
                    <td><input type="date"></td>
                </tr>
                <tr>
                    <td class="firstTd">部门</td>
                    <td><select id="selectDep">

                    </select></td>
                    <td class="thirdTd">登记日期</td>
                    <td><input type="date"></td>
                </tr>
                <tr>
                    <td class="firstTd">类别</td>
                    <td>
                        <input type="radio" name="type" title="收入">
                        <input type="radio" name="type" title="支出">
                    </td>
                    <td rowspan="3" class="thirdTd">摘要
                        (说明费用产生原由）</td>
                    <td rowspan="3">
                        <textarea name="desc" placeholder="请输入内容" class="layui-textarea"></textarea>
                        <!--<textarea cols="25" style="height: 50px"></textarea>-->
                    </td>
                </tr>
                <tr>
                    <td class="firstTd">科目</td>
                    <td>
                        <input type="text">
                    </td>
                </tr>
                <tr>
                    <td class="firstTd">业务所属公司</td>
                    <td>
                        <select id="selectCompany" name="selectCompany" lay-filter='selectCompany'>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td class="firstTd">报销人</td>
                    <td>
                        <input type="text"><span style="cursor: pointer" onclick="openAddReiPerson()">点击选择</span>
                    </td>
                    <td class="thirdTd">发票</td>
                    <td>
                        <select id="selectInvoiceStatus"></select>
                    </td>
                </tr>
                <tr>
                    <td class="firstTd">经办人</td>
                    <td>
                        <input type="text"><span style="cursor: pointer" >点击选择</span>
                    </td>
                    <td class="thirdTd">发票金额</td>
                    <td><input type="number" style="width: 80px">元（保留两位小数）</td>
                </tr>
                <tr>
                    <td class="firstTd">登记人</td>
                    <td>
                        <input type="text" readonly th:value="${session.staff.staffName}"> *系统登陆账号不能修改
                    </td>
                    <td class="thirdTd">合同</td>
                    <td><select id="selectContractStatus"></select></td>
                </tr>
                <tr>
                    <td class="firstTd">属性</td>
                    <td>
                        <input type="radio" name="type2" title="需要报备">
                    </td>
                    <td class="thirdTd"></td>
                    <td></td>
                </tr>
                <tr>
                    <td class="firstTd"></td>
                    <td>
                        <input type="button" value="新增保存" class="layui-btn layui-btn-primary layui-btn-sm">
                    </td>
                    <td class="thirdTd"></td>
                    <td></td>
                </tr>
            </table>
            </form>
            <!--<button onclick="openAddReiPerson()" class="layui-btn layui-btn-primary" >测试</button>-->
        </div>
    </div>
</div>

<script>
    // 载入form模块
    var form;
    layui.use('form', function(){
        form = layui.form;
        //监听
        form.on('select(childSelectCompany)',function (data) {
            var deps = selectDepByCompany(data.value);
            cleanSelect("childSelectDep");
            romance(deps,"childSelectDep");
            form.render();
        })
        form.on('select(childSelectDep)',function (data) {
            var persons = selectPersonsByCompanyAndDep($("#childSelectCompany").val(),$("#childSelectDep").val());
            cleanSelect("childSelectPerson")
            romance(persons,"childSelectPerson");
            form.render();
        })

    });
    //载入jquery模块
    layui.use('jquery'),function(){
        $=layui.jquery;
    }
    //载入layer模块
    layui.use('layer', function(){
        var layer = layui.layer;
    });

    function  openAddReiPerson() {
        layer.open({
            type: 1,
            area: ['400px', '300px'],
            shadeClose: true, //点击遮罩关闭
            content: "<div class='layui-row' style='text-align: center'>\n" +
                "<form class=\"layui-form\" action=\"\">\n" +
                "<div class=\"layui-form-item\">\n" +
                "    <label class=\"layui-form-label\">选择公司：</label>\n" +
                "    <div class=\"layui-input-block\">\n" +
                "        <select id='childSelectCompany' name='childSelectCompany1' lay-filter='childSelectCompany' lay-verify=\"required\">\n" +
                "<option></option>" +
                "        </select>\n" +
                "    </div>\n" +
                "</div>\n" +
                "<div class=\"layui-form-item\">\n" +
                "    <label class=\"layui-form-label\">选择部门：</label>\n" +
                "    <div class=\"layui-input-block\">\n" +
                "        <select id='childSelectDep' lay-verify=\"required\" lay-filter='childSelectDep'>\n" +
                "<option></option>" +
                "        </select>\n" +
                "    </div>\n" +
                "</div>\n" +
                "<div class=\"layui-form-item\">\n" +
                "    <label class=\"layui-form-label\">选择员工：</label>\n" +
                "    <div class=\"layui-input-block\">\n" +
                "        <select name=\"childSelectPerson\" lay-verify=\"required\" lay-filter='childSelectPerson'>\n" +
                "<option></option>" +
                "        </select>\n" +
                "    </div>\n" +
                "</div>\n" +
                "<button type='button' class='layui-btn'>确定</button>" +
                "</form>\n" +
                "</div>"
        });
        var companys = selectCompany();
        romance(companys,"childSelectCompany");
        form.render();
    }
 </script>
</body>
</html>